<div class="dashboard-container">
    <header class="dashboard-header">
        <div class="header-content">
            <h1>Registro de Certificados</h1>
            <section class="export-section">
                <button id="export-btn" class="btn-export">Descargar en CSV</button>
                <button id="refresh-btn" class="btn-refresh">Actualizar</button>
            </section>
        </div>

    </header>

    <main class="dashboard-main">
        <section class="stats-section">
            <div class="stat-card">
                <h3>Total de Registros</h3>
                <p class="stat-number" id="total-records">{{ totalRecords }}</p>
            </div>
            <div class="stat-card">
                <h3>Luces Registradas</h3>
                <p class="stat-number" id="total-lights">{{ totalLights | number }}</p>
            </div>
            <div class="stat-card">
                <h3>√öltimos 24h</h3>
                <p class="stat-number" id="records-24h">{{ last24h }}</p>
            </div>
        </section>

        <section class="filters-section">
            <input type="text" id="search-input" class="search-box" placeholder="üîç Buscar por nombre de tienda..."
                [(ngModel)]="sortType" (change)="applySort()" />
            <select id="sort-select" class="sort-select">
                <option value="newest">M√°s recientes primero</option>
                <option value="oldest">M√°s antiguos primero</option>
                <option value="name">Por nombre (A-Z)</option>
                <option value="lights">Por cantidad de luces</option>
            </select>
        </section>

        <section class="table-section">
            <div class="table-wrapper">
                <table class="records-table">
                    <thead>
                        <tr>
                            <th>Tienda/Empresa</th>
                            <th>Cantidad de Luces</th>
                            <th>Direcci√≥n</th>
                            <th>Departamento</th>
                            <th>Provincia</th>
                            <th>Distrito</th>
                            <th>Fecha</th>
                            <th>Registrado</th>
                        </tr>
                    </thead>
                    <tbody id="records-body">
                        <tr class="loading-row" *ngFor="let record of filteredRecords">
                            <td><strong>{{ record.nombre }}</strong></td>
                            <td><span class="badge">{{ record.cantidad }}</span></td>
                            <td>{{ record.direccion || '-' }}</td>
                            <td>{{ record.departamento }}</td>
                            <td>{{ record.provincia }}</td>
                            <td>{{ record.distrito }}</td>
                            <td>{{ record.fecha || '-' }}</td>
                            <td>{{ record.createdAt | date:'dd MMM yyyy HH:mm' }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="no-records" class="no-records" style="display: none;">
                <p>No hay registros que mostrar</p>
            </div>
        </section>
    </main>
</div>